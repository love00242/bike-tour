(function(t){function e(e){for(var a,r,c=e[0],s=e[1],l=e[2],p=0,f=[];p<c.length;p++)r=c[p],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&f.push(o[r][0]),o[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},o={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/bike-tour/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"267b":function(t,e,n){"use strict";n("7668")},"26a0":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],r=(n("034f"),n("2877")),c={},s=Object(r["a"])(c,o,i,!1,null,null,null),l=s.exports,u=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header"),n("div",{staticClass:"relative"},[n("SearchArea",{attrs:{bikeData:t.bikeData},on:{changeCity:t.changeCity,changeCenterBike:t.changeCenterBike}}),n("SearchTab",{attrs:{tabArr:t.tabArr}}),n("button",{staticClass:"btn-position left-114 top-6 z-1"},[n("font-awesome-icon",{attrs:{icon:"crosshairs"}})],1),n("BikeMap",{attrs:{bikeData:t.bikeData,changeCenter:t.changeCenter}})],1)],1)},f=[],d=n("1da1"),m=(n("96cf"),n("d3b7"),n("159b"),n("7db0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex items-center justify-around h-16 bg-green px-10"},[t._m(0),n("ul",{staticClass:"flex w-4/5 justify-end"},t._l(t.list,(function(e,a){return n("li",{key:a,staticClass:"\n        flex\n        items-center\n        text-mi\n        bg-white\n        font-bold\n        text-green\n        rounded-lg\n        px-3\n        py-1\n        mr-3\n        min-w-max\n      "},[n("font-awesome-icon",{attrs:{icon:e.icon}}),n("p",{staticClass:"ml-1"},[t._v(t._s(e.title))])],1)})),0)])}),h=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-56 min-w-max px-2"},[n("img",{attrs:{src:"/images/Logo.png",alt:""}})])}],b={props:{},data:function(){return{list:[{title:"找單車",icon:"bicycle"},{title:"找路線",icon:"route"}]}}},g=b,v=Object(r["a"])(g,m,h,!1,null,null,null),y=v.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"\n    flex flex-col\n    absolute\n    top-6\n    left-5\n    w-96\n    h-xl\n    bg-white\n    rounded-lg\n    shadow\n    p-3\n    z-1\n  "},[n("SearchBar",{on:{changeCity:t.changeCity}}),n(t.nowComponent,{tag:"component",attrs:{bikeData:t.bikeData},on:{changeCenterBike:t.changeCenterBike}})],1)},x=[],C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex items-center justify-center mt-2 mb-3"},[n("div",{staticClass:"\n      flex\n      items-center\n      justify-center\n      w-64\n      h-9\n      bg-gray-light\n      rounded-lg\n      mr-3\n    "},[n("input",{staticClass:"bg-gray-light placeholder-gray-dark focus:outline-none w-4/5",attrs:{type:"text",placeholder:"搜尋路線或鄰近地點"}}),n("font-awesome-icon",{staticClass:"text-gray-dark ml-2",attrs:{icon:"search"}})],1),n("select",{directives:[{name:"model",rawName:"v-model",value:t.seletCity,expression:"seletCity"}],staticClass:"\n      text-green\n      px-2\n      py-1.5\n      rounded-lg\n      border-solid border border-green\n      font-bold\n      focus:outline-none\n    ",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.seletCity=e.target.multiple?n:n[0]},t.changeCity]}},t._l(t.list,(function(e,a){return n("option",{key:a,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)])},_=[],w=[{name:"臺北市",id:"Taipei"},{name:"新北市",id:"NewTaipei"},{name:"桃園市",id:"Taoyuan"},{name:"新竹市",id:"Hsinchu"},{name:"苗栗縣",id:"MiaoliCounty"},{name:"臺中市",id:"Taichung"},{name:"嘉義市",id:"Chiayi"},{name:"臺南市",id:"Tainan"},{name:"屏東縣",id:"PingtungCounty"},{name:"高雄市",id:"Kaohsiung"},{name:"金門縣",id:"KinmenCounty"}],S={data:function(){return{list:w,seletCity:"Taipei"}},computed:{},methods:{changeCity:function(){this.$emit("changeCity",this.seletCity)}},mounted:function(){this.changeCity()}},B=S,j=Object(r["a"])(B,C,_,!1,null,null,null),O=j.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"overflow-y-auto px-1.5"},t._l(t.bikeData,(function(e,a){return n("li",{key:a,staticClass:"flex flex-col pt-4 border-solid border-b border-line cursor-pointer",on:{click:function(n){return t.getBikeStation(e)}}},[n("h2",{staticClass:"text-xl font-bold text-green-dark text-left mb-2"},[t._v(" "+t._s(t.setName(e.StationName.Zh_tw))+" ")]),n("div",{staticClass:"flex mb-3"},[n("div",{class:["flex-col rounded-lg bg-skin w-2/4 mr-4 py-1 text-green-dark",{closeItem:!e.AvailableRentBikes}]},[n("small",{staticClass:"text-mi font-bold"},[n("font-awesome-icon",{attrs:{icon:"bicycle"}}),t._v("可租借")],1),n("p",{staticClass:"text-2xl font-bold"},[t._v(t._s(e.AvailableRentBikes))])]),n("div",{class:["flex-col rounded-lg bg-skin w-2/4 py-1 text-green-dark",{closeItem:!e.AvailableReturnBikes}]},[n("small",{staticClass:"text-mi font-bold"},[n("font-awesome-icon",{attrs:{icon:"parking"}}),t._v("可停車")],1),n("p",{staticClass:"text-2xl font-bold"},[t._v(t._s(e.AvailableReturnBikes))])])]),n("span",{class:["rounded-md border-solid border border-orange font-bold text-orange py-1 w-22 mb-3.5",{closeStatus:!e.AvailableRentBikes&&!e.AvailableReturnBikes}]},[t._v(t._s(t.setStationStatus(e)))])])})),0)},A=[],T=(n("ac1f"),n("1276"),{props:["bikeData"],data:function(){return{}},watch:{bikeData:function(t){t&&this.getBikeStation(t[0])}},computed:{},methods:{setName:function(t){return t.indexOf("_")>-1?t.split("_")[1]:t},setStationStatus:function(t){var e=t.ServiceType,n=t.AvailableRentBikes,a=t.AvailableReturnBikes;return 0===e||2===e||!n&&!a?"暫停營運":n&&a?"可借可還":n&&!a?"只可借車":"只可還車"},getBikeStation:function(t){console.log(t),this.$emit("changeCenterBike",t)}},mounted:function(){var t;null!==(t=this.bikeData)&&void 0!==t&&t[0]&&this.getBikeStation(this.bikeData[0])}}),P=T,$=(n("267b"),Object(r["a"])(P,D,A,!1,null,"246ffd46",null)),z=$.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",t._l(t.bikeData,(function(t,e){return n("li",{key:e})})),0)},R=[],L={props:["bikeData"],data:function(){return{}},computed:{},methods:{},mounted:function(){}},M=L,H=Object(r["a"])(M,E,R,!1,null,"0941cff4",null),N=H.exports,I={props:["bikeData","routeData"],components:{SearchBar:O,BikeList:z,RouteList:N},data:function(){return{}},computed:{nowComponent:function(){var t;return(null===(t=this.bikeData)||void 0===t?void 0:t.length)>0?"BikeList":"RouteList"}},methods:{changeCity:function(t){this.$emit("changeCity",t)},changeCenterBike:function(t){this.$emit("changeCenterBike",t)}}},U=I,Z=Object(r["a"])(U,k,x,!1,null,null,null),K=Z.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"\n    flex\n    bg-white\n    shadow\n    rounded-large\n    absolute\n    top-6\n    left-100\n    py-1.5\n    px-0.5\n    w-max\n    z-1\n  "},t._l(t.tabArr,(function(e,a){return n("li",{key:a,class:["text-green mx-1.5 flex items-center px-2",{selected:t.isNowTab===e.type}],on:{click:function(n){return t.changeTab(e.type)}}},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:e.icon}}),t._v(" "+t._s(e.title)+" ")],1)})),0)},G=[],J={props:["tabArr"],data:function(){return{isNowTab:0}},computed:{},methods:{changeTab:function(t){this.isNowTab=t}}},F=J,q=(n("7970"),Object(r["a"])(F,X,G,!1,null,"a7df347c",null)),Q=q.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("l-map",{ref:"myMap",staticClass:"z-0",staticStyle:{height:"calc(100vh - 64px)"},attrs:{zoom:t.zoom,center:t.center,options:t.options}},[n("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),n("v-marker-cluster",[n("l-marker",{ref:"location",attrs:{"lat-lng":t.center}},[n("l-icon",{attrs:{"icon-url":t.icon.type.green,"icon-size":t.icon.iconSize,"icon-anchor":t.icon.iconAnchor,"popup-anchor":t.icon.popupAnchor}}),n("l-popup",{staticStyle:{"min-width":"200px"}},[t._v(t._s(t.changeCenter&&t.changeCenter.StationName.Zh_tw))])],1)],1),n("v-marker-cluster",t._l(t.bikeData,(function(e,a){return n("l-marker",{key:a,attrs:{"lat-lng":[e.StationPosition.PositionLat,e.StationPosition.PositionLon]}},[n("l-icon",{attrs:{"icon-url":t.icon.type.green,"icon-size":t.icon.iconSize,"icon-anchor":t.icon.iconAnchor,"popup-anchor":t.icon.popupAnchor}}),n("l-popup",[t._v(" "+t._s(e.StationName.Zh_tw)+" ")])],1)})),1)],1)},W=[],Y={props:["bikeData","changeCenter"],data:function(){return{zoom:18,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',options:{zoomControl:!1},icon:{type:{green:"/images/bike-position.png",gold:"/images/user-position.png"},iconSize:[30,40],iconGoldSize:[40,40],iconAnchor:[12,41],popupAnchor:[1,-34]}}},watch:{center:function(t){t&&(console.log("opennnnn"),this.$refs.location.mapObject.openPopup())}},computed:{center:function(){if(this.changeCenter){var t=this.changeCenter.StationPosition,e=t.PositionLat,n=t.PositionLon;return[e,n]}return[25.0408578889,121.567904444]}},methods:{},mounted:function(){var t=this;this.$nextTick((function(){navigator.geolocation.getCurrentPosition((function(e){var n=e.coords;t.center=[n.latitude,n.longitude],t.$refs.location.mapObject.openPopup()}))}))}},tt=Y,et=Object(r["a"])(tt,V,W,!1,null,"7a561824",null),nt=et.exports,at=n("bc3a"),ot=n.n(at),it=n("6c2d");function rt(){var t="0d068c678f4f4154bfa8c2a45628e50c",e="FbfZCusU3lw2S1jLnj9jxbO5P3w",n=(new Date).toGMTString(),a=new it["a"]("SHA-1","TEXT");a.setHMACKey(e,"TEXT"),a.update("x-date: "+n);var o=a.getHMAC("B64"),i='hmac username="'+t+'", algorithm="hmac-sha1", headers="x-date", signature="'+o+'"';return{Authorization:i,"X-Date":n}}var ct=ot.a.create({baseURL:"https://ptx.transportdata.tw/MOTC/v2/",dataType:"json",headers:rt()}),st=function(t,e){return ct.get("Bike/Station/".concat(t),{params:e})},lt=function(t,e){return ct.get("Bike/Availability/".concat(t),{params:e})},ut={components:{Header:y,SearchArea:K,SearchTab:Q,BikeMap:nt},data:function(){return{tabArr:[{title:"找單車",type:0,icon:"bicycle"},{title:"找車位",type:1,icon:"parking"}],nowCity:"",bikeData:[],changeCenter:null}},computed:{},methods:{changeCity:function(t){this.nowCity=t,this.bikeData=[],this.getBikeLocation()},changeCenterBike:function(t){this.changeCenter=t},setBikeData:function(t,e){var n=[];t.forEach((function(t){var a=e.find((function(e){return e.StationID===t.StationID})),o=Object.assign(t,a);n.push(o)})),this.bikeData=n},getBikeLocation:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,st(t.nowCity);case 3:return n=e.sent,e.next=6,lt(t.nowCity);case 6:a=e.sent,200===n.status&&200===a.status&&t.setBikeData(n.data,a.data),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}},mounted:function(){}},pt=ut,ft=Object(r["a"])(pt,p,f,!1,null,null,null),dt=ft.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("Header")],1)},ht=[],bt={components:{Header:y},data:function(){return{}},computed:{}},gt=bt,vt=Object(r["a"])(gt,mt,ht,!1,null,null,null),yt=vt.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("Header")],1)},xt=[],Ct={components:{Header:y},data:function(){return{}},computed:{}},_t=Ct,wt=Object(r["a"])(_t,kt,xt,!1,null,null,null),St=wt.exports;a["a"].use(u["a"]);var Bt=[{path:"/",name:"Bike",component:dt},{path:"/route",name:"Route",component:yt},{path:"/attraction",name:"Attraction",component:St}],jt=new u["a"]({mode:"history",base:"/bike-tour/",routes:Bt}),Ot=jt,Dt=n("2f62");a["a"].use(Dt["a"]);var At=new Dt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Tt=n("ecee"),Pt=n("c074"),$t=n("ad3d"),zt=n("2699"),Et=n("a40a"),Rt=n("4e2b"),Lt=n("f60f"),Mt=n("fbba"),Ht=n("ca9f"),Nt=n.n(Ht),It=(n("ba8c"),n("6cc5"),n("8243"),n("3ac1"),n("e11e"));Tt["c"].add(Pt["a"]),a["a"].component("font-awesome-icon",$t["a"]),a["a"].component("l-map",zt["a"]),a["a"].component("l-tile-layer",Et["a"]),a["a"].component("l-marker",Rt["a"]),a["a"].component("l-popup",Lt["a"]),a["a"].component("l-icon",Mt["a"]),a["a"].component("v-marker-cluster",Nt.a),delete It["Icon"].Default.prototype._getIconUrl,It["Icon"].Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")}),a["a"].config.productionTip=!1,new a["a"]({router:Ot,store:At,render:function(t){return t(l)}}).$mount("#app")},7668:function(t,e,n){},7970:function(t,e,n){"use strict";n("26a0")},"85ec":function(t,e,n){},ba8c:function(t,e,n){}});
//# sourceMappingURL=app.7ea37748.js.map